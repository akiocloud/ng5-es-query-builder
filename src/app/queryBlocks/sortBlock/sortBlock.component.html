<div class="form-group single_query col-xs-12 bool_query">
    <div class="action-btn-group bool-btn-group">
        <a href="javascript:void(0)" class="btn btn-grey delete-nested-query" (click)="deleteSort();">
            <i class="fa fa-times"></i>
        </a>
    </div>
    <div class="row m-b15">
        <div class="row m-0 col-xs-12">
            <div *ngFor="let sort of result.sort, let i=index" class="form-group col-xs-12 single_query internal-query sort-query sort-row-{{i}}" [ngClass]="{'query_complete': sort.selectedField}">
                <div class="action-btn-group">
                    <a href="javascript:void(0)" class="btn btn-grey" (click)="removeSortQuery(i);">
                        <i class="fa fa-times"></i>
                    </a>
                </div>
                <div class="clearfix">
                    
                    <mat-form-field>
                        <mat-select
                            [(value)]="sort.selectedField"
                            (change)="sortFieldCallback(sort)"><!--  -->
                            
                            <mat-option
                                *ngFor="let field of allFields" 
                                [value]="field">{{ field }}</mat-option>
                            
                        </mat-select>
                    </mat-form-field>
                    <div class="col-xs-4">
                        <div class="toggle clearfix">
                            <a [ngClass]="{'selected': sort.order === 'asc'}" (click)="setSortOrder('asc', i)">Asc</a>
                            <a [ngClass]="{'selected': sort.order === 'desc'}" (click)="setSortOrder('desc', i)">Desc</a>
                        </div>
                    </div>

                    <mat-form-field>
                        <mat-select>
                            
                            <mat-option
                                *ngFor="let optionalParam of sort.availableOptionalParams"
                                [value]="optionalParam">{{ optionalParam }}</mat-option>
                            
                        </mat-select>
                    </mat-form-field>
                </div>
                
                <div class="row m-0 mt-10 single_query clearfix" *ngIf="sort.mode || sort.mode == ''">
                    <div class="action-btn-group">
                        <a href="javascript:void(0)" class="btn btn-grey" (click)="removeSortOptionalQuery(i, 'mode');">
                            <i class="fa fa-times"></i>
                        </a>
                    </div>
                    <div class="col-xs-4 pd-l0">

                        <mat-form-field>
                            <mat-select
                                [(value)]="sort.mode"
                                (change)="sortModeCallback()"><!--  -->
                                
                                <mat-option
                                    *ngFor="let mode of sort.modeList"
                                    [value]="mode">{{ mode }}</mat-option>
                                
                            </mat-select>
                        </mat-form-field>
                    </div>
                </div>

                <div class="row m-0 mt-10 single_query clearfix" *ngIf="sort.missing || sort.missing == ''">
                    <div class="action-btn-group">
                        <a href="javascript:void(0)" class="btn btn-grey" (click)="removeSortOptionalQuery(i, 'missing');">
                            <i class="fa fa-times"></i>
                        </a>
                    </div>
                    <div class="col-xs-4 pd-l0">
                        <input type="text" class="form-control"
                            [(ngModel)]="sort.missing"
                            placeholder="Missing values"
                            (keyup)="exeBuild();" />
                    </div>
                </div>

                 <div class="row m-0 mt-10 single_query clearfix" *ngIf="sort._geo_distance">
                    <div class="action-btn-group" *ngIf="!sort._geo_distance">
                        <a href="javascript:void(0)" class="btn btn-grey" (click)="removeSortOptionalQuery(i, '_geo_distance');">
                            <i class="fa fa-times"></i>
                        </a>
                    </div>
                    <div class="col-xs-4 pd-l0">
                        <input type="text" class="form-control"
                            [(ngModel)]="sort._geo_distance.lat"
                            placeholder="latitude"
                            (keyup)="exeBuild();" />
                    </div>
                    <div class="col-xs-4 pd-l0">
                        <input type="text" class="form-control"
                            [(ngModel)]="sort._geo_distance.lon"
                            placeholder="longitude"
                            (keyup)="exeBuild();" />
                    </div>
                    <div class="col-xs-4 pd-l0">
                        <input type="text" class="form-control"
                            [(ngModel)]="sort._geo_distance.unit"
                            placeholder="unit default as m"
                            (keyup)="exeBuild();" />
                    </div>
                    <div class="col-xs-4 pd-l0 mt-10">
                        


                        <mat-form-field>
                            <mat-select
                                [(value)]="sort._geo_distance.distance_type"
                                (change)="sortDistanceTypeCallback()"><!--  -->
                                
                                <mat-option
                                    *ngFor="let distanceType of distanceTypeList"
                                    [value]="distanceType">{{ distanceType }}</mat-option>
                                
                            </mat-select>
                        </mat-form-field>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-xs-12 add_condition_row" style="padding: 0">
        <button class="btn btn-default add_condition" (click)="initSort()"><i class="fa fa-plus"></i> Conditions</button>
    </div>
</div>